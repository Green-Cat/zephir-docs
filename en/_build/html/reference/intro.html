
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introducing Zephir &mdash; Zephir 0.2.0a documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0a',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Zephir 0.2.0a documentation" href="../index.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Why Zephir?" href="motivation.html" /> 
  </head>
  <body>
    <div id="wrapper">
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="motivation.html" title="Why Zephir?"
             accesskey="P">previous</a> |</li>
        <li><a href="http://zephir-lang.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Zephir 0.2.0a documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            <!--<div id="searchbox" style="">
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="15" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>-->
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Introducing Zephir</a><ul>
<li><a class="reference internal" href="#hello-world">Hello World!</a></li>
<li><a class="reference internal" href="#a-taste-of-zephir">A Taste of Zephir</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="motivation.html" title="previous chapter">&lt; Why Zephir?</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="tutorial.html" title="next chapter">Tutorial &gt;</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/intro.txt" rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <div class="section" id="introducing-zephir">
<h1>Introducing Zephir<a class="headerlink" href="#introducing-zephir" title="Permalink to this headline">¶</a></h1>
<p>Zephir is a language that addresses the major needs of a PHP developer trying to write and compile code that
can be executed by PHP. It is a dynamically/statically typed, some of its features can be familiar to
PHP developers.</p>
<p>The name Zephir is a contraction of the words Zend Engine/PHP/Intermediate. While this suggests that the
pronunciation should be zephyr, the creators of Zephir actually pronounce it <a class="reference external" href="http://translate.google.com/#en/en/zaefire">zaefire</a>.</p>
<div class="section" id="hello-world">
<h2>Hello World!<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<p>Every language has its own &#8220;Hello World!&#8221;, in Zephir this introductory example showcase some important
features of this language.</p>
<p>Code in Zephir must be placed in classes, Zephir is intended to create object-oriented libraries/frameworks,
so code out of a class is not allowed. Also a namespace is required:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * This is a sample class</span>
<span class="cm"> */</span>
<span class="kr">class</span> <span class="nx">Hello</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * This is a sample method</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">say</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">echo</span> <span class="s2">&quot;Hello World!&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once this class is compiled it produce the following code that is transparently compiled by gcc/clang/vc++:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#ifdef HAVE_CONFIG_H</span>
<span class="cp">#include &quot;config.h&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#include &quot;php.h&quot;</span>
<span class="cp">#include &quot;php_test.h&quot;</span>
<span class="cp">#include &quot;test.h&quot;</span>

<span class="cp">#include &quot;kernel/main.h&quot;</span>

<span class="cm">/**</span>
<span class="cm"> * This is a sample class</span>
<span class="cm"> */</span>
<span class="n">ZEPHIR_INIT_CLASS</span><span class="p">(</span><span class="n">Test_Hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ZEPHIR_REGISTER_CLASS</span><span class="p">(</span><span class="n">Test</span><span class="p">,</span> <span class="n">Hello</span><span class="p">,</span> <span class="n">hello</span><span class="p">,</span> <span class="n">test_hello_method_entry</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">SUCCESS</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * This is a sample method</span>
<span class="cm"> */</span>
<span class="n">PHP_METHOD</span><span class="p">(</span><span class="n">Test_Hello</span><span class="p">,</span> <span class="n">say</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">php_printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Actually, it is not expected that a developer that use Zephir must understand or know C,
however if you have any experience with compilers, php internals or the C language itself,
it would provide a more clear sceneario to the developer when working with Zephir.</p>
</div>
<div class="section" id="a-taste-of-zephir">
<h2>A Taste of Zephir<a class="headerlink" href="#a-taste-of-zephir" title="Permalink to this headline">¶</a></h2>
<p>In the following examples, we’ll describe just enough of the details so you understand what’s going on.
The goal is to give you a sense of what programming in Zephir is like. We’ll explore the details of the
features in subsequent chapters.</p>
<p>The following example is very simple it implements a class and a method with an small program that checks
the types of an array</p>
<p>Let’s examine the code in detail, so we can begin to learn Zephir syntax.
There are a lot of details in just a few lines of code! We’ll explain the general ideas here:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">namespace</span> <span class="nx">Test</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * MyTest (test/mytest.zep)</span>
<span class="cm"> */</span>
<span class="kr">class</span> <span class="nx">MyTest</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">someMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/* Variables must be declared */</span>
        <span class="kd">var</span> <span class="nx">myArray</span><span class="p">;</span>
        <span class="kr">int</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span><span class="p">;</span>

        <span class="cm">/* Create an array */</span>
        <span class="kd">let</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">100.25</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">];</span>

        <span class="cm">/* Count the array into a &#39;int&#39; variable */</span>
        <span class="kd">let</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">count</span><span class="p">(</span><span class="nx">myArray</span><span class="p">);</span>

        <span class="cm">/* Print value types */</span>
        <span class="k">while</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">{</span>
            <span class="nx">echo</span> <span class="k">typeof</span> <span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;\n&quot;</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">myArray</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the method, the first lines use the &#8216;var&#8217; and &#8216;int&#8217; keywords are used to declare a variables in a local scope.
Every variable used in a method must be declared with its respective type. This declaration is not optional,
it helps the compiler to report you about mistyped variables or about the use of variables out of their scope
which usually ends in runtime errors.</p>
<p>Dynamic variables are declared with the keyword &#8216;var&#8217;. These variables can be assigned and reassigned
to different types. On the other hand, we have &#8216;i&#8217; and &#8216;length&#8217; integer static typed variables
that can only have values ​​of this type in the entire program execution.</p>
<p>Compared to PHP you don&#8217;t require a dollar sign ($) in front of variables.</p>
<p>By the way, that’s a comment on the first line (with the name of the source file for the code example).
Zephir follows the same comment conventions as Java, C#, C++, etc.
A //comment goes to the end of a line, while a /* comment */ can cross line boundaries.</p>
<p>Variables are by default inmutable, this means that Zephir expects that most variables stand
unchanged. Variables that maintain their initial value can be optimized down by the compiler to static constants.
When the value of a variable needs to be changed, the keyword &#8216;let&#8217; must be used:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="cm">/* Create an array */</span>
<span class="kd">let</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">100.25</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">null</span><span class="p">];</span>
</pre></div>
</div>
<p>By default, arrays are dynamical like in PHP, it may contain values of different types.
Functions from the PHP userland can be called in Zephir code, in the example the function &#8216;count&#8217;
was called, the compiler can performs optimizations like avoid this call because it already knows the size of
the array:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="cm">/* Count the array into a &#39;int&#39; variable */</span>
<span class="kd">let</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">count</span><span class="p">(</span><span class="nx">myArray</span><span class="p">);</span>
</pre></div>
</div>
<p>Parentheses in control flow statements are optional, you can also use them if you feel more confortable.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="k">while</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">{</span>
    <span class="nx">echo</span> <span class="k">typeof</span> <span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;\n&quot;</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>PHP only works with dynamic variables, methods always return dynamic variables, this means that if a
static typed variable is returned, in the PHP side, you will get a dynamic variable that can be used
in PHP code. Note that memory was automatically managed by the compiler, so you don&#8217;t need to allocate or free
memory like in C, working in a similar way than PHP.</p>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="motivation.html" title="Why Zephir?"
             >previous</a> |</li> 
      </ul>
    </div>
        <div id="footer">

          <p>Zephir Language is released under the <a href="https://github.com/phalcon/cphalcon/blob/master/docs/LICENSE.md">Zephir License</a>.</p>
          <p>Except where otherwise noted, content on this site is licensed under the
            <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a></p>
             Last updated on Aug 21, 2013.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.

          <p>
             &copy; Copyright 2013, Zephir Team.
          </p>

        </div>

    </div>
  </body>
</html>